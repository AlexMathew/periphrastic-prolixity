<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Periphrastic Prolixity]]></title>
  <link href="http://periphrastic-prolixity.herokuapp.com/atom.xml" rel="self"/>
  <link href="http://periphrastic-prolixity.herokuapp.com/"/>
  <updated>2014-10-26T02:34:31+05:30</updated>
  <id>http://periphrastic-prolixity.herokuapp.com/</id>
  <author>
    <name><![CDATA[Alex Mathew]]></name>
    <email><![CDATA[alexmathew003@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[The TNT Journey - Part 2]]></title>
    <link href="http://periphrastic-prolixity.herokuapp.com/blog/2014/10/17/the-tnt-journey-part-2/"/>
    <updated>2014-10-17T00:02:10+05:30</updated>
    <id>http://periphrastic-prolixity.herokuapp.com/blog/2014/10/17/the-tnt-journey-part-2</id>
    <content type="html"><![CDATA[<p>Step 1 : Get cummulative statistics. <a href="http://periphrastic-prolixity.herokuapp.com/blog/2014/10/16/the-tnt-journey-part-1/">Done</a>.</p>

<p>Now I need to find a way to measure the performance of these players during this period. Several people have written about different statistics to do this. I need to pick the best ones for the problem I have at hand.</p>

<!--more-->


<p>Aggregation worked beautifully. I got the cummulative stats I needed to work with. Now I have to put this into a new collection and I&rsquo;m all set to go. Except, it wasn&rsquo;t that easy. Updating a collection with results from the aggregation pipeline is pretty hard. Looping through the results is too inefficient. After some research (read, StackOverflow), I found the $out pipeline stage. Seemed like just what I needed. I gave it a shot and got this.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>"errmsg" : "exception: Unrecognized pipeline stage name: '$out'"</span></code></pre></td></tr></table></div></figure>


<p>Roadblock ! Turns out $out is a new addition in MongoDB 2.6 and I was working with 2.4. So before any more progress could happen, an update had to happen.</p>

<p>While I waited for the 100+ MB file download to complete (I have bad internet - 100MB is a big deal), I read some Quora answers and research papers on performance measures. Now I had to pick the ones that gave the most efficient results.</p>

<p>I needed some proper measures to judge how useful a player is on a team. It&rsquo;s cricket, so a player can contribute to a team in many different ways. He could be a batsman who plays the bulk of the innings to set up the score, or he could be a batsman who faces around 15 or 20 balls to make a quickfire 30. He could be the strike bowler who takes 2 or 3 wickets in his qouta of 10 overs, or he could be the bowler who restricts the opponents&#8217; run flow by conceding only at around 3 runs an over.</p>

<p>So what statistics would I have to consider ?</p>

<ul>
<li><p>Batting average : Runs scored per out. Undoubtedly, one of the most argued about statistics in cricket. And for valid reasons. The batting average ends up extremely skewed in favour of players who come lower down the order, because of the higher probability that they&rsquo;d remain not out.</p></li>
<li><p>Strike rate : Runs scored per 100 balls. I remember watching cricket at a time when a strike rate of around 80 was the trademark of a &ldquo;blazing innings&rdquo;. Times have definitely changed. Higher strike rates are a major focus in batting line ups.</p></li>
<li><p>Batting pinch hitting rate : A very good idea I got out of <a href="http://www.quora.com/What-new-statistical-measures-could-make-cricket-better-in-terms-of-player-evaluation-and-viewer-experience/answer/Thomas-Foster">this Quora answer</a>. Boundaries have a huge impact on the flow of a match. It switches momentum, leads to the fielding setup getting shuffled, and so much more. This can be improved a little by giving a higher weightage to sixes (because sixes are awesome !).</p></li>
<li><p>Bowling average : Runs conceded per wicket taken. The lower, the better. Pretty efficient stat to work with.</p></li>
<li><p>Bowling strike rate : Balls bowled per wicket. Because strike bowlers strike often.</p></li>
<li><p>Bowling pinch hitting rate : If it can be used to quantify a batsman&rsquo;s performance, it can be used for bowlers too. Batsmen want to score boundaries, bowlers should make sure they can&rsquo;t.</p></li>
</ul>


<p>I need to find a way to work with all of these numbers together. And there should be an efficient way to strike a balance. Hashim Amla may not be the quickest scorer, but he definitely scores a lot. James Anderson has an average economy rate, but he&rsquo;s one of the best strike bowlers in the world. Normalize, combine these stats into one index - I need to see what works best.</p>

<p>In other MongoDB news, it turns out $out is not what I need. I need to combine the results from multiple aggregation commands into one collection, but $out puts the result from one aggregation command into one collection. So I need to move back to my original option of looping through the results. Fire IPython, <code>import pymongo</code> and get to work.</p>

<p>Now that I have player-wise statistics, I need to find the most efficient way to quantify their overall performance and pick the best performers.</p>

<p>Part 3 may take a while to come out. I&rsquo;ll work on some options and make one grand update on my progress.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The TNT Journey - Part 1]]></title>
    <link href="http://periphrastic-prolixity.herokuapp.com/blog/2014/10/16/the-tnt-journey-part-1/"/>
    <updated>2014-10-16T14:58:04+05:30</updated>
    <id>http://periphrastic-prolixity.herokuapp.com/blog/2014/10/16/the-tnt-journey-part-1</id>
    <content type="html"><![CDATA[<p>And so, the journey with TNT begins. A 175K+ row dataset. A new challenge.</p>

<p>Over the next few posts, I&rsquo;ll document the various facets of my approach to this problem. Part 1 - how do I get started ?</p>

<!--more-->


<p>I registered for the event a few days after I heard about it. I thought I&rsquo;d give myself time to get some basic idea in place before I get started. So I took my time to read about various statistics that people proposed and how it&rsquo;d help in finding the most efficient players. In my head, it felt like Brad Pitt and Jonah Hill discussing Sabermetrics. I loved how people were crunching numbers to produce evidence of how the statistic they proposed was effective. It seemed simple enough - work with their averages and strike rates and other basic statistics. With the expected basic idea in place, I registered for TNT, and later that day, I got the link to the dataset. Downloaded the file, unzipped it and opened the Excel sheet. And then the bomb dropped.</p>

<p>Ball-by-ball data.</p>

<p>Somehow, I didn&rsquo;t expect that I would have to work with ball-by-ball data. In its native form, ball-by-ball stats are pretty useless (unless you&rsquo;re analyzing run rate patterns and everything). So before getting to work with various performance measures, I had to put the available data together into cummulative stats.</p>

<p>I had a CSV file to work with. I had to pick my weapon to get started. I had a few options.</p>

<p>Option 1 - R. I&rsquo;d always wanted to get started with learning R. I never found a compelling reason to get around to working with it. This seemed like a very good starting point. But I didn&rsquo;t want to learn something from scratch for this. I thought it&rsquo;d be a low-efficiency move to tread into unfamiliar territory, just to work with this dataset. So R, maybe later. Ruled out for now.</p>

<p>Option 2 - Pandas. Familiarity with Python, check. An interest to work with the data side of Python, check. But Pandas is very vast. Getting a base with NumPy to just get started is very hard. So SciPy stack, sometime soon, but not now. Ruled out for now.</p>

<p>I had a large dataset that I had to break into cummulative stats of each player. And I needed somewhere to store it. I would use a database anyway, so why not use it to also aggregate the data the way I need it ? And that was option 3.</p>

<p>Option 3 - MongoDB. I had done some basic work with MongoDB. The M101P course (which, even after 3 attempts, I haven&rsquo;t been able to finish) gave me a decent base with the CRUD and aggregation operations. 175K row dataset - bring out the aggregation framework !</p>

<p>Importing the data into a DB was easier than I thought.</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>$ mongoimport --db tnt --collection odi --type csv --file ODI.csv --headerline </span></code></pre></td></tr></table></div></figure>


<p>And that was done. Easy stuff.</p>

<p>The hard part was writing aggregation commands to do the required grouping. It&rsquo;s sort of like writing regular expressions - extremely hard, very annoying, but so damn powerful. After a lot of reference from the MongoDB docs and StackOverflow, I managed to get the stats I needed. For example, to get the total runs that a batsman scored.</p>

<figure class='code'><figcaption><span>MongoDB aggregation to find total runs scored</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">db</span><span class="p">.</span><span class="nx">odi</span><span class="p">.</span><span class="nx">aggregate</span><span class="p">([{</span> <span class="nx">$group</span><span class="o">:</span> <span class="p">{</span> <span class="nx">_id</span><span class="o">:</span> <span class="s2">&quot;$Batsman&quot;</span><span class="p">,</span> <span class="nx">Runs</span><span class="o">:</span> <span class="p">{</span> <span class="nx">$sum</span><span class="o">:</span> <span class="s2">&quot;$Runs Batsman&quot;</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="nx">$sort</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;Runs&quot;</span><span class="o">:</span> <span class="o">-</span><span class="mi">1</span> <span class="p">}</span> <span class="p">}])</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>Some easy ones and some hard. And I managed to get the stats I needed.</p>

<p>Now, step 2. I need to put this together and build some performance measures.</p>

<p>Part 2 of this series will be up when I have some significant progress on that front.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Cause I'm TNT, I'm Dynamite]]></title>
    <link href="http://periphrastic-prolixity.herokuapp.com/blog/2014/10/15/cause-im-tnt/"/>
    <updated>2014-10-15T23:33:31+05:30</updated>
    <id>http://periphrastic-prolixity.herokuapp.com/blog/2014/10/15/cause-im-tnt</id>
    <content type="html"><![CDATA[<p>(Yes, I just made an AC/DC reference)</p>

<p>First off, huge shout out to LatentView Analytics. Thank you for the job placement offer ! It&rsquo;s given me so much peace of mind, and in turn, freedom to experiment with new stuff.</p>

<p>About a week back, I heard about LatentView&rsquo;s new event for final and pre-final years - &ldquo;The Number Thing&rdquo;. Or, TNT. Perfect experimentation ground.</p>

<!--more-->


<p>All the problems were interesting. It was just a matter of picking the right one.</p>

<p>Cricket stat analysis.
Crime pattern analysis.
Text analysis.</p>

<p>One sports analytics question, and I was sold. That was my choice. Cricket Craze.</p>

<p>I knew it would be a lot of fun. I also expected it to be challenging. What I didn&rsquo;t expect was a 175373-row dataset. I knew this would be a whole new challenge for me. This was the biggest dataset I&rsquo;ve had to work with so far. I had to get new tools in my arsenal to tackle this. This was going to be a crazy ride.</p>

<p>I decided to blog about what my approach to this problem. Think of it as documentation. Over the next few posts, I&rsquo;ll break down my approach - from the initial steps, all the way down to the final result (hopefully!).</p>

<p>If you&rsquo;re reading this and think there&rsquo;s a better way than the approach I&rsquo;ve taken, do give your suggestions ! Also, suggest resources to get started with them. You can write to me at alexmathew003[at]gmail[dot]com</p>

<p>Check out the &ldquo;TNT&rdquo; category on the blog to read the posts. I&rsquo;ll make regular updates as I make progress.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[The Beginnings]]></title>
    <link href="http://periphrastic-prolixity.herokuapp.com/blog/2014/10/15/the-beginnings/"/>
    <updated>2014-10-15T23:07:00+05:30</updated>
    <id>http://periphrastic-prolixity.herokuapp.com/blog/2014/10/15/the-beginnings</id>
    <content type="html"><![CDATA[<p>In the beginning, there was nothing. And then I said &ldquo;Let there be a blog&rdquo;. And it was done.</p>

<!-- more -->


<p>I&rsquo;ve always wanted to do this. Laziness always stopped me. But I&rsquo;m not going to let it stop me anymore. I&rsquo;ve made the decision now. I am going to maintain this blog.</p>

<p>I don&rsquo;t have any particular agenda of what I&rsquo;m going to put in here. Just my thoughts/opinions/reviews of stuff, a live blog of anything I&rsquo;m working on. Just to give some direction to my ideas. I&rsquo;m not going to try to make this huge and viral. I&rsquo;ll just let this lie in a corner of the vast expanse of the Internet, so I can look at it some day and recollect how I went about stuff (or say &ldquo;what was I thinking ?&rdquo;).</p>

<p>Let the ride begin. And may the blog be forever in your favour.</p>
]]></content>
  </entry>
  
</feed>
